<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <link rel="stylesheet" href="res/js/jqm/jquery.mobile-1.2.0.min.css"/>
  <script src ='res/js/gk/jquery-1.8.3.js'></script>
  <script src ='res/js/gk/jquery.gkm-0.1.js'></script>
  <script>
	$(document).ready(function(){
		$('body').html($.gk('body').html());
	});
  </script>
  <script src ='res/js/jqm/jquery.mobile-1.2.0.min.js'></script>
</head>
<body>
	<script>
	  //add item
	  $.gk.model['add'] ={
		onclick:function(){
		  var record = {'item':$('#input').val()};
		  $('#itemList').gk('add',record);
		  $('#input').val('');
		}
	  };
	  //remove item
	  $.gk.model['itemList'] ={
		onclick:function(evt){
			var text = $(evt.srcElement).text().trim();
			var record = {'item': text};
		  this.remove(record);
		}
	  };
	</script>

	<page>
	  <header label='ToDoList'></header>
	  <content>
		<input id='input' type="text" placeholder='What needs to be done?'>
		<btn id='add' label='Add'></btn>
		<listview id='itemList' >
		  <template>
			<li data-icon="delete" data-iconpos="right">
				<a>${item}</a>
			</li>
		  </template>
		</listview>
	  </content>
	</page>

</body>
</html>