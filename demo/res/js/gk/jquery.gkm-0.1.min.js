var __extends=this.__extends||function(C,A){function B(){this.constructor=C}B.prototype=A.prototype;C.prototype=new B()};var WebComponent=(function(){function A(B){this.id=B;TagUtils.iteratorNode(this.ele);var C=this.className();this.ele=$("#"+this.id);this.bindEvent()}A.gkm="";A.prototype.init=function(){};A.prototype.replaceAttr=function(C,B,D){if(this.ele.attr(C)==B){this.ele.attr(C,D)}};A.prototype.setAttr=function(E,C){for(var B=0;B<C.length;B++){var D=this.ele.attr(C[B]);if(D!="${"+C[B]+"}"){E[C[B]]=D}}};A.prototype.bindEvent=function(){var C=this;var F=document.getElementById(this.id);if(F==null){return}for(var E=0;E<F.attributes.length;E++){var G=F.attributes[E];if(G.name.indexOf("data-gk-")==0){var B=G.name.substring(8);var D="on"+B;$(this.ele).unbind(B);this.ele.bind(B,function(H){if(typeof(C[D])=="function"){C[D](H)}})}}};A.prototype.className=function(){var D=/function (.{1,})\(/;var B=(D).exec((this)["constructor"].toString());var C=(B&&B.length>1)?B[1]:"";return C.split("(")[0]};A.prototype.gkm=function(){return window[this.className()].gkm};A.prototype.infoArray=function(D){var C="";var B=this;$.each(D,function(E,J){var I=TagLibrary.template(B.id);for(var F in J){if(J.hasOwnProperty(F)){var H=J[F];var G=new RegExp("\\${"+F+"}","g");I=I.replace(G,H)}}C+=I});C=$.gk.toHTML(C);return $(C).html()};A.prototype.infoObject=function(G){var C="";var F=TagLibrary.template(this.id);for(var B in G){if(G.hasOwnProperty(B)){var E=G[B];var D=new RegExp("\\${"+B+"}","g");F=F.replace(D,E)}}C+=F;C=$.gk.toHTML(C);return $(C).html()};A.prototype.template=function(B){if(B){TagLibrary.eventStore.template[this.id]=B}else{return TagLibrary.eventStore.template[this.id]}};return A})();var TagUtils=(function(){function D(){}D.createDIVWrapper=function E(J){var I=document.createDocumentFragment();var H=document.documentElement;var L=document.createElement("div");var K=document.createElement("div");I.appendChild(L);K.style.display="none";H.appendChild(K);K.innerHTML=J;while(K.firstChild){L.appendChild(K.firstChild)}H.removeChild(K);return L};D.toElement=function B(I){var H=D.createDIVWrapper(I);return H.firstChild};D.replaceElement=function C(K,H){var I=K.parentNode;while(H!=null){var J=H.nextSibling;TagLibrary.debug("replace +--"+H.nodeName);I.insertBefore(H,K);H=J}I.removeChild(K)};D.innerHTML=function G(I){var J="";var H=I;if(H!=null){if(I.innerHTML!=""){return I.innerHTML}while(H.nextSibling){H=H.nextSibling;if(H.nodeType==3){J+=H.nodeValue.trim();H.nodeValue=""}else{if(H.nodeType==1){break}}}}return J};D.iteratorNode=function F(I){var J=I;while(J!=null){var H=this.collectDataAttributes(J,TagLibrary.eventStore,this.processTagElement);if(J.nextSibling){J=J.nextSibling}else{break}}return I};D.collectDataAttributes=function A(J,I,H){if(J.nodeType!=1||J.attributes.length==0){return""}var K={};K.id=$(H).attr("id")||TagLibrary.genID;var L=/^data\-(.+)$/;$.each(J.attributes,function(N,M){if(L.test(M.nodeName)){var O=M.nodeName.match(L)[1];O=O.substring(3);var M=O.indexOf("init")==0?O:"on"+O;K[O]=$(H).attr(M)}});I.keys.push(K.id);I.push(K);return K.id};return D})();var CustomTag=(function(){function B(){}B.clazz="";B.html="";B.processTagElement=null;B.customTagElement=null;B.CLASS="use";B.replaceWith=function A(F){if(typeof F==="undefined"){return}B.processTagElement=F;B.customTagElement=TagLibrary.customTags[F.nodeName.toUpperCase()].cloneNode(true);B.clazz=$(this.customTagElement).attr(B.CLASS)||"WebComponent";B.html=$(this.customTagElement).html();if(typeof F.id==="undefined"||F.id==""){F.id="_gk_"+TagLibrary.serial++}var D="$.gk.com('"+F.id+"' , new window['"+B.clazz+"']('"+F.id+"'));";TagLibrary.eventStore.script.push(D);var G=B.html;var C=TagUtils.innerHTML(this.processTagElement);window[B.clazz].gkm=C;G=G.replace(TagLibrary.gkm,C);$.each(this.processTagElement.attributes,function(H,I){var J=new RegExp("\\${"+I.nodeName+"}","g");G=G.replace(J,I.nodeValue)});var E=TagUtils.toElement(G);TagUtils.replaceElement(this.processTagElement,E);return E};return B})();var TagLibrary=(function(){function D(F){F=F||D.tmpl;D.eventStore.keys=[];D.eventStore.script=[];D.eventStore.template={};var G=TagUtils.createDIVWrapper(F);$.each($(G).children(),function(H,J){if(J.innerHTML.indexOf(D.gkm)<0){$(J).append(D.gkm)}var I=$(J).attr("name").toUpperCase();D.customTags[I]=J})}D.serial=0;D.genID="";D.customTags={};D.customTagStyles={};D.gkm="${content}";D.DATAKEY="_gk_";D.eventStore=[];D.tmpl="";D.debug=function A(F){};D.template=function C(F){return D.eventStore.template[F]};D.isComponent=function B(F){return D.customTags[F.toUpperCase()]};D.process=function E(F){if(F==null){return}var H=F.nodeName;D.debug("process:"+H);if(H==="TEMPLATE"){var G=$(F.parentNode).attr("id");D.eventStore.template[G]=F.innerHTML;F.innerHTML=""}if(D.isComponent(H)){D.process(CustomTag.replaceWith(F))}else{if(F.firstChild){D.process(F.firstChild)}else{if(F.nextSibling){D.process(F.nextSibling)}else{if(F.parentNode&&F.parentNode.parentNode){F=F.parentNode;while(F.nextSibling==null){if(F.parentNode){F=F.parentNode}else{return}}D.process(F.nextSibling)}}}}};return D})();var _WebComponent=(function(A){__extends(B,A);function B(){A.apply(this,arguments)}return B})(WebComponent);$.gk=function(A){if(A.indexOf("#")==0){return $(A).data(TagLibrary.DATAKEY)}return{html:function(C){if(C){$(A).html(C);return $(A)}else{var D=$(A).html();var B=$.gk.toHTML(D).innerHTML;return B}},toHTML:function(){$(A).each(function(B,D){var C=$.gk.toHTML($(D).html());$(D).html(C)})}}};$.gk.model={};$.gk.toHTML=function(C){var D=TagUtils.createDIVWrapper(C);TagLibrary.process(D);var E=JSON.stringify(TagLibrary.eventStore.template);var B='<script>TagLibrary.eventStore["template"]=eval('+E+");<\/script>";var A=(TagLibrary.eventStore.script||[]).join(" ");D.innerHTML=B+D.innerHTML+"<script>"+A+"<\/script>";TagLibrary.eventStore.script=[];return D};$.gk.com=function(D,B){TagLibrary.eventStore.script=TagLibrary.eventStore.script||[];if(B){$("#"+D).data(TagLibrary.DATAKEY,B);var A=$.gk.model[D];if(A){for(var C in A){if(A.hasOwnProperty(C)){B[C]=A[C]}}}B.init()}else{return $("#"+D).data(TagLibrary.DATAKEY)}};$.gk.def=function(A){var B=TagUtils.createDIVWrapper(A);$.each($(B).children(),function(K,O){var H=$(O).attr("name");var E=$(O).attr("name").toUpperCase();if($(O).children().length==2){var N="var "+H+" = (function (_super) {__extends("+H+", _super);function "+H+"(id) {_super.call(this, id);} ";var C="return "+H+";})(WebComponent);";var J=$($(O).children()[1]).text();J=N+J+C;var F=document.getElementsByTagName("head")[0];var M=document.createElement("script");M.type="text/javascript";M.text=J;F.appendChild(M)}var I=$(O).children()[0];if(I.innerHTML.indexOf(TagLibrary.gkm)<0){$(I).append(TagLibrary.gkm)}TagLibrary.customTags[E]=I;var L=/<style>(.|\s)*?<\/style>/gi;var G=A.match(L);if(G&&G.length>0){var K=G.length;var D=/<style>|<\/style>/gi;while(K>0){K=K-1;G[K]=G[K].replace(D,"")}TagLibrary.customTagStyles[E]=G}if(!$.support.leadingWhitespace){document.createElement(E)}});$.gk.taglib=$.gk.taglib||new TagLibrary()};$.gk.tagStyles=function(A){var B;if(A){B=TagLibrary.customTagStyles[A.toUpperCase()]||[]}else{B=TagLibrary.customTagStyles}return B};$.gk.load=function(A,B){$.get(A,function(C){$.gk.def(C);B()})};(function(A){A.fn.gk=function(D,C){if(arguments.length==0){return A(this).data(TagLibrary.DATAKEY)}var B;this.each(function(F,H){var G=A(H).data(TagLibrary.DATAKEY);if(typeof G!="undefined"&&G[D]!="undefined"){var E=G[D](C);if(F==0){B=E}}});return B}})(jQuery);$.gk.def("<gk:element name='Nav'><gk:view><div class='navbar navbar-inverse navbar-fixed-top'><div class='navbar-inner'><div class='container' style='font-size:1rem;'><div class='nav-collapse collapse'><ul class='nav'><li class='${home}'><a href='./index.html'> Home</a></li><li class='${getstarted}'><a href='./getstarted.html'> Get Started</a></li><li class='${play}'><a href='./play.html'> Play</a></li><li class='${api}'><a href='./api.html'> API</a></li><li class='${component}'><a href='./jqueryMobileTmpl.html'> Component</a></li><li class='${pattern}'><a href='./pattern.html'> Pattern</a></li></ul></div></div></div></div></gk:view></gk:element><gk:element name='GMap'><gk:view use='GMap'><div style='${style}'><div id='${id}' style='${style}' zoom='${zoom}' type='${type}' data-gk-click='${onclick}'></div><div>${gkm}</div></div></gk:view></gk:element><gk:element name='Page'><gk:view><div id='${id}' data-role='page'>${content}</div></gk:view></gk:element><gk:element name='Header'><gk:view use='Header'><div id='${id}' data-gk-click='${onclick}' data-position='fixed' data-theme='a' data-role='header' style='font-size:16px;text-align:center;'><div style='margin:13px 0 0 0'>${label}</div>${content}</div></gk:view><gk:component> Header.prototype.label = function (lab) { if(lab) { this.ele.children(1).html(lab); return this.ele; } else { return this.ele.children(1).html(); } }; </gk:component></gk:element><gk:element name='Content'><gk:view><div id='${id}' style='padding:15px' data-role='content'>${content}</div></gk:view></gk:element><gk:element name='Footer'><gk:view><div id='${id}' data-position='fixed' data-theme='a' data-role='footer'>${content}</div></gk:view></gk:element><gk:element name='ListForm'><gk:view><li data-corners='false' data-shadow='false' data-iconshadow='true' data-wrapperels='div' data-icon='arrow-r' data-iconpos='right' data-theme='d' class='ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-up-d'><div href='${href}' class='ui-link-inherit'><h3 class='ui-li-heading'>${heading}</h3>${content}</div></li></gk:view></gk:element><gk:element name='ListView'><gk:view use='ListView'><style>.ui-li-desc{font-size:16px;}.ui-li{font-size:18px;}</style><ul id='${id}' data-gk-click='${onclick}' data-role='listview' data-inset='${inset}' data-divider-theme='d' class='ui-listview'> ${content} </ul></gk:view><gk:component> ListView.prototype.data = []; ListView.prototype.info = function (infoArray) { if(infoArray) { this.data = infoArray; var listItem = _super.prototype.infoArray.call(this, infoArray); $('#' + this.id).html(listItem); try { var el = $('#' + this.id); el.listview('refresh'); } catch (e) { } } else { return this.data; } }; ListView.prototype.add = function (obj) { this.data.push(obj); this.info(this.data); return this; }; ListView.prototype.remove = function (removeObj) { var removeJSONObj = JSON.stringify(removeObj); this.info($.grep(this.data, function (obj) { return removeJSONObj == JSON.stringify(obj); }, true)); return this; }; </gk:component></gk:element><gk:element name='SelectBar'><gk:view use='SelectBar'><div data-role='navbar' data-grid='d' class='ui-navbar ui-mini' role='navigation'><ul id='${id}' class='ui-grid-d' data-gk-click='${onclick}'> ${content} </ul></div></gk:view><gk:component> this.date = 'none'; </gk:component></gk:element><gk:element name='Text'><gk:view use='Text'><label for='name'>${label}</label><input id='${id}' type='text' name='${name}' value='${value}' readonly/></gk:view><gk:component> Text.prototype.value = function (v) { if(v) { return $(this.ele).val(v); } else { return $(this.ele).val(); } }; </gk:component></gk:element><gk:element name='Date'><gk:view use='Date'><label for='${name}'>${label}</label><input id='${id}' name='${name}' type='date' data-role='datebox' data-options=\"{'mode': 'calbox'}\" value='${value}' data-gk-blur='${onblur}'/></gk:view></gk:element><gk:element name='Password'><gk:view><label for='password'>${label}</label><input id='${id}' type='password' name='${name}' value='${value}'/></gk:view></gk:element><gk:element name='TextArea'><gk:view><div data-role='fieldcontain'><label for='textarea'>${label}</label><textarea cols='40' rows='8' name='${name}' id='${id}'></textarea></div></gk:view></gk:element><gk:element name='Row'><gk:view use='Row'><div id='${id}' class='ui-grid-a' columns='${columns}'> ${content}</div></gk:view><gk:component> Row.prototype.init = function (v) { this.colNum = ['ui-grid-a', 'ui-grid-b', 'ui-grid-c', 'ui-grid-d']; var n = parseInt(this.ele.attr('columns')) - 2; $(this.ele).attr('class', this.colNum[n]); }; </gk:component></gk:element><gk:element name='Column'><gk:view use='Column'><div id='${id}' idx='${idx}'> ${content} </div></gk:view><gk:component> Column.prototype.init = function(){ this.colNum = ['ui-block-a','ui-block-b','ui-block-c', 'ui-block-d','ui-block-e']; var n = parseInt(this.ele.attr('idx')) - 1; $(this.ele).attr('class', this.colNum[n]); }; </gk:component></gk:element><gk:element name='Btn'><gk:view use='Btn'><a id='${id}' href='#' type='button' value='${value}' data-inline='${inline}' data-gk-click='${onclick}' data-icon='${icon}'>${label}</a></gk:view><gk:component> Btn.prototype.init = function(){ var pos=this.ele.attr('_iconpos'); this.ele.attr('data-iconpos', pos); }; Btn.prototype.enable = function (b) { this.ele.button(b ? 'enable' : 'disable'); }; Btn.prototype.refresh = function () { this.ele.button('refresh'); }; Btn.prototype.label = function (val) { if(val) { $($('#' + this.id + ' span span')[0]).html(val); } else { return $($('#' + this.id + ' span span')[0]).html(); } }; Btn.prototype.visible = function (b) { if(arguments.length>0) { b ? this.ele.parent().show() : this.ele.parent().hide(); } else { return this.ele.parent().is(':visible'); } }; </gk:component></gk:element><gk:element name='BackBtn'><gk:view use='BackBtn'><a data-icon='back' data-rel='back' href='#home' class='ui-btn-${pos}'>${label}</a></gk:view></gk:element><gk:element name='NavBar'><gk:view><div id='${id}' data-role='navbar' data-iconpos='top'><ul>${content}</ul></div></gk:view></gk:element><gk:element name='NavBtn'><gk:view use='NavBtn'><li><a id='${id}' href='${href}' data-transition='none' data-theme='' data-gk-click='${onclick}' data-icon='${icon}' class='${state}'>${label}</a></li></gk:view><gk:component> NavBtn.prototype.init = function(){ this.replaceAttr('class', 'on', 'ui-btn-active ui-state-persist'); }; </gk:component></gk:element><gk:element name='Icon'><gk:view use='Icon'><span class=\"ui-li-count ui-btn-corner-all\" style=\"display:none;z-index:1;position:relative;float:right;background:#ed1d24;color:#fff;padding:2px;\"></span><a id='${id}' file='${src}' data-gk-click='${onclick}' data-role='button' data-mini=\"true\" style='margin:5px;'><img style='width:48px;height:48px;position:relative;left:5px'></a><div style='text-align:center'>${content}</div></gk:view><gk:component> Icon.prototype._count = 0; Icon.prototype.init = function(){ var file = this.ele.attr('file'); $($(this.ele).children()[0]).attr('src', file); }; Icon.prototype.count = function(i){ this.ele.prev().css('display',i==0? 'none':''); this.ele.prev().html(''+i); }; </gk:component></gk:element>");